# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=its
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password

# Alternative: Full database URL (if provided, overrides individual settings above)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/its

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Node environment (development | production | test)
NODE_ENV=development

# Port for Express server
PORT=3000

# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173

# Timezone for cron jobs (IANA timezone format)
TZ=Europe/Paris

# ============================================================================
# SCRAPER CONFIGURATION
# ============================================================================

# Cron schedule for automatic scraping (cron format: minute hour dayOfMonth month dayOfWeek)
# Default: Every Wednesday at 8:00 AM
SCRAPE_CRON_SCHEDULE=0 8 * * 3

# Delay in milliseconds between HTTP requests to avoid rate limiting
SCRAPE_DELAY_MS=1000

# Number of days to scrape starting from start date
# Default: 7 (full week)
# Min: 1, Max: 14
SCRAPE_DAYS=7

# Scrape mode: 
# - 'weekly': Start from current/previous Wednesday (7 days by default)
# - 'from_today': Start from current date
# - 'from_today_limited': Start from today until Tuesday (max 7 days)
# Default: weekly
# Note: Automatic cron jobs always use 'weekly' mode with 7 days
SCRAPE_MODE=weekly

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection URL (used by backend and scraper microservice)
REDIS_URL=redis://localhost:6379

# ============================================================================
# SCRAPER MICROSERVICE CONFIGURATION
# ============================================================================

# Feature flag: set to "true" to use the Redis-based scraper microservice
# When false (default), the legacy in-process scraper is used
USE_REDIS_SCRAPER=false

# Scraper container run mode:
# - "consumer"  : Long-running process polling Redis queue (for ics-scraper)
# - "cron"      : Scheduled scraping on CRON_SCHEDULE (for ics-scraper-cron)
# - "oneshot"   : Pop one job and exit
# - "direct"    : Run once immediately and exit
RUN_MODE=consumer

# ============================================================================
# LOGGING & OBSERVABILITY
# ============================================================================

# Log level for Winston (error | warn | info | debug)
# Default: info
LOG_LEVEL=info

# OpenTelemetry â€“ distributed tracing (Tempo)
# Set OTEL_ENABLED=true when running the monitoring profile
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://ics-tempo:4317

# ============================================================================
# CLIENT CONFIGURATION (for React frontend)
# ============================================================================

# API base URL for the React app (used by Vite during development)
VITE_API_BASE_URL=http://localhost:3000/api
# ============================================================================
# CLIENT CONFIGURATION (for React frontend)
# ============================================================================

# API base URL for the React app (used by Vite during development)
VITE_API_BASE_URL=http://localhost:3000/api
