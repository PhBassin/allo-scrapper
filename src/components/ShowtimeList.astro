---
import type { Showtime } from '../scraper/types';

interface Props {
  showtimes: Showtime[];
}

const { showtimes } = Astro.props;

// Grouper les séances par version (VF/VO)
const showtimesByVersion = showtimes.reduce((acc, showtime) => {
  const version = showtime.version || 'VF';
  if (!acc[version]) acc[version] = [];
  acc[version].push(showtime);
  return acc;
}, {} as Record<string, Showtime[]>);
---

{Object.entries(showtimesByVersion).length > 0 ? (
  <div class="space-y-3">
    {Object.entries(showtimesByVersion).map(([version, versionShowtimes]) => (
      <div class="border-l-4 border-primary pl-3">
        <p class="text-sm font-semibold text-gray-700 mb-2">{version}</p>
        <div class="flex flex-wrap gap-2">
          {versionShowtimes.map((showtime) => (
            <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded hover:bg-primary hover:text-black transition cursor-pointer text-sm font-medium">
              {showtime.time}
            </span>
          ))}
        </div>
      </div>
    ))}
  </div>
) : (
  <p class="text-gray-500 text-sm">Aucune séance disponible</p>
)}
